{% extends "Echo_app/base.html" %}
{% load static %}

{% block title %}Meu Perfil{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'Echo_app/css/perfil.css' %}?v={% now 'U' %}">
{% endblock %}

{% block content %}

<div class="container" style="max-width: 800px; margin: 0 auto; padding: 20px;">

    <h1 class="main-title" style="text-align: center; margin-bottom: 30px; color: #333;">Meu Perfil</h1>

    <div class="perfil-card" style="background: #fff; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 40px 30px;">

        <!-- CABE√áALHO DO PERFIL -->
        <div class="perfil-header" style="display: flex; flex-direction: column; align-items: center; text-align: center;">
            
            <!-- 
                √ÅREA DA FOTO (AVATAR) - AUMENTADO PARA 280px 
                Nota: A propriedade 'overflow: hidden' garante que nada saia do c√≠rculo.
            -->
            <div class="perfil-avatar-container" style="position: relative; width: 280px; height: 280px; margin-bottom: 25px; border-radius: 50%;">
                {% if perfil.foto_perfil %}
                    <img id="perfil-avatar-img" 
                         src="{{ perfil.foto_perfil.url }}" 
                         alt="Foto de Perfil" 
                         style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 6px solid #fff; box-shadow: 0 5px 20px rgba(0,0,0,0.2);">
                {% else %}
                    <img id="perfil-avatar-img" 
                         src="https://ui-avatars.com/api/?name={{ request.user.first_name|default:request.user.username }}&background=0D8ABC&color=fff&size=512&font-size=0.5&bold=true" 
                         alt="Avatar Padr√£o" 
                         style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 6px solid #fff; box-shadow: 0 5px 20px rgba(0,0,0,0.2);">
                {% endif %}

                <!-- Bot√£o de Editar Flutuante (Aumentado para acompanhar) -->
                <a href="{% url 'Echo_app:perfil_editar' %}" title="Alterar foto" 
                   style="position: absolute; bottom: 15px; right: 15px; background: #fff; border-radius: 50%; width: 60px; height: 60px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; color: #333; text-decoration: none; font-size: 28px; border: 2px solid #f0f0f0;">
                    ‚úé
                </a>
            </div>
            
            <!-- INFO DO USU√ÅRIO -->
            <div class="perfil-info" style="width: 100%;">
                <h3 class="saudacao" style="margin: 0; font-weight: 800; font-size: 2rem;">
                    {{ request.user.first_name }} {{ request.user.last_name }}
                </h3>
                <p class="user-email" style="color: #6c757d; margin: 8px 0; font-size: 1.2rem;">{{ request.user.email }}</p>

                {% if perfil.biografia %}
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin: 25px auto; max-width: 650px;">
                        <p class="user-bio" style="white-space: pre-line; margin: 0; color: #555; font-size: 1.1rem; line-height: 1.6;">{{ perfil.biografia }}</p>
                    </div>
                {% endif %}

                <div style="margin-top: 30px;">
                    <a href="{% url 'Echo_app:perfil_editar' %}" class="btn-editar" style="background-color: #333; color: white; padding: 15px 40px; border-radius: 50px; text-decoration: none; font-weight: 700; font-size: 1.1rem; display: inline-block; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                        Editar Perfil
                    </a>
                </div>
            </div>
        </div>
        
        <hr class="perfil-divider" style="margin: 50px 0; border: 0; border-top: 1px solid #eee;">

        <!-- MENU DE OP√á√ïES -->
        <nav class="menu-opcoes" style="display: flex; flex-direction: column; gap: 15px;">
            <a class="menu-item" href="{% url 'Echo_app:noticias_curtidas' %}" style="padding: 20px; text-decoration: none; color: #333; display: flex; align-items: center; border-radius: 12px; transition: all 0.2s; background-color: #fcfcfc; border: 1px solid #f0f0f0;">
                <span style="margin-right: 20px; font-size: 1.5rem;">‚ù§Ô∏è</span> 
                <span style="font-weight: 600; font-size: 1.2rem;">Not√≠cias Curtidas</span>
            </a>

            <a class="menu-item" href="{% url 'Echo_app:noticias_salvas' %}" style="padding: 20px; text-decoration: none; color: #333; display: flex; align-items: center; border-radius: 12px; transition: all 0.2s; background-color: #fcfcfc; border: 1px solid #f0f0f0;">
                <span style="margin-right: 20px; font-size: 1.5rem;">üîñ</span> 
                <span style="font-weight: 600; font-size: 1.2rem;">Not√≠cias Salvas</span>
            </a>

            <a class="menu-item" href="{% url 'Echo_app:configuracoes_conta' %}" style="padding: 20px; text-decoration: none; color: #333; display: flex; align-items: center; border-radius: 12px; transition: all 0.2s; background-color: #fcfcfc; border: 1px solid #f0f0f0;">
                <span style="margin-right: 20px; font-size: 1.5rem;">‚öôÔ∏è</span> 
                <span style="font-weight: 600; font-size: 1.2rem;">Configura√ß√µes da Conta</span>
            </a>

            <hr style="margin: 20px 0; border-top: 1px solid #eee;">

            <a class="menu-item acao-logout" href="{% url 'Echo_app:sair' %}" style="padding: 20px; text-decoration: none; color: #dc3545; display: flex; align-items: center; border-radius: 12px; transition: all 0.2s;">
                <span style="margin-right: 20px; font-size: 1.5rem;">üö™</span> 
                <span style="font-weight: 600; font-size: 1.2rem;">Sair da Conta</span>
            </a>
            
            <a class="menu-item acao-deletar" href="{% url 'Echo_app:excluir_conta' %}" style="padding: 20px; text-decoration: none; color: #6c757d; font-size: 1.1rem; display: flex; align-items: center; border-radius: 12px; transition: all 0.2s;">
                <span style="margin-right: 20px; font-size: 1.5rem;">‚ùå</span> 
                <span>Excluir Conta Permanentemente</span>
            </a>
        </nav>
    </div>
</div>

<style>
    .menu-item:hover {
        background-color: #fff !important;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        transform: translateY(-2px);
        border-color: #ddd !important;
    }
</style>
{% endblock %}