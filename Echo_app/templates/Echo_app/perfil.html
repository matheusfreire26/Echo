{% extends "Echo_app/base.html" %}
{% load static %}

{% block title %}Meu Perfil{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'Echo_app/css/perfil.css' %}?v={% now 'U' %}">
{% endblock %}

{% block content %}

<div class="container" style="max-width: 800px; margin: 0 auto; padding: 20px;">

    <h1 class="main-title" style="text-align: center; margin-bottom: 30px; color: #333;">Meu Perfil</h1>

    <div class="perfil-card" style="background: #fff; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 30px;">

        <!-- CABEÇALHO DO PERFIL -->
        <div class="perfil-header" style="display: flex; flex-direction: column; align-items: center; text-align: center;">
            
            <!-- ÁREA DA FOTO (AVATAR) - TAMANHO AUMENTADO AQUI -->
            <div class="perfil-avatar-container" style="position: relative; width: 220px; height: 220px; margin-bottom: 20px;">
                {% if perfil.foto_perfil %}
                    <img id="perfil-avatar-img" 
                         src="{{ perfil.foto_perfil.url }}" 
                         alt="Foto de Perfil" 
                         style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 5px solid #f0f0f0; box-shadow: 0 4px 15px rgba(0,0,0,0.15);">
                {% else %}
                    <img id="perfil-avatar-img" 
                         src="https://ui-avatars.com/api/?name={{ request.user.first_name|default:request.user.username }}&background=0D8ABC&color=fff&size=256&font-size=0.5&bold=true" 
                         alt="Avatar Padrão" 
                         style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 5px solid #f0f0f0; box-shadow: 0 4px 15px rgba(0,0,0,0.15);">
                {% endif %}

                <!-- Botão de Editar (Aumentado também) -->
                <a href="{% url 'Echo_app:perfil_editar' %}" title="Alterar foto" 
                   style="position: absolute; bottom: 10px; right: 10px; background: #fff; border-radius: 50%; width: 50px; height: 50px; box-shadow: 0 2px 8px rgba(0,0,0,0.3); display: flex; align-items: center; justify-content: center; color: #333; text-decoration: none; font-size: 24px;">
                    ✎
                </a>
            </div>
            
            <!-- INFO DO USUÁRIO -->
            <div class="perfil-info" style="width: 100%;">
                <h3 class="saudacao" style="margin: 0; font-weight: bold; font-size: 1.8rem;">
                    {{ request.user.first_name }} {{ request.user.last_name }}
                </h3>
                <p class="user-email" style="color: #6c757d; margin: 5px 0; font-size: 1.1rem;">{{ request.user.email }}</p>

                {% if perfil.biografia %}
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin: 20px auto; max-width: 600px;">
                        <p class="user-bio" style="white-space: pre-line; margin: 0; color: #555; font-size: 1rem;">{{ perfil.biografia }}</p>
                    </div>
                {% endif %}

                <div style="margin-top: 25px;">
                    <a href="{% url 'Echo_app:perfil_editar' %}" class="btn-editar" style="background-color: #333; color: white; padding: 12px 35px; border-radius: 30px; text-decoration: none; font-weight: 600; font-size: 1rem; display: inline-block;">
                        Editar Perfil
                    </a>
                </div>
            </div>
        </div>
        
        <hr class="perfil-divider" style="margin: 40px 0; border: 0; border-top: 1px solid #eee;">

        <!-- MENU DE OPÇÕES -->
        <nav class="menu-opcoes" style="display: flex; flex-direction: column; gap: 10px;">
            <a class="menu-item" href="{% url 'Echo_app:noticias_curtidas' %}" style="padding: 15px; text-decoration: none; color: #333; display: flex; align-items: center; border-radius: 10px; transition: background 0.2s; background-color: #fcfcfc; border: 1px solid #f0f0f0;">
                <span style="margin-right: 15px; font-size: 1.4rem;"></span> 
                <span style="font-weight: 500; font-size: 1.1rem;">Notícias Curtidas</span>
            </a>

            <a class="menu-item" href="{% url 'Echo_app:noticias_salvas' %}" style="padding: 15px; text-decoration: none; color: #333; display: flex; align-items: center; border-radius: 10px; transition: background 0.2s; background-color: #fcfcfc; border: 1px solid #f0f0f0;">
                <span style="margin-right: 15px; font-size: 1.4rem;"></span> 
                <span style="font-weight: 500; font-size: 1.1rem;">Notícias Salvas</span>
            </a>

            <a class="menu-item" href="{% url 'Echo_app:configuracoes_conta' %}" style="padding: 15px; text-decoration: none; color: #333; display: flex; align-items: center; border-radius: 10px; transition: background 0.2s; background-color: #fcfcfc; border: 1px solid #f0f0f0;">
                <span style="margin-right: 15px; font-size: 1.4rem;"></span> 
                <span style="font-weight: 500; font-size: 1.1rem;">Configurações da Conta</span>
            </a>

            <hr style="margin: 15px 0; border-top: 1px solid #eee;">

            <a class="menu-item acao-logout" href="{% url 'Echo_app:sair' %}" style="padding: 15px; text-decoration: none; color: #dc3545; display: flex; align-items: center; border-radius: 10px; transition: background 0.2s;">
                <span style="margin-right: 15px; font-size: 1.4rem;"></span> 
                <span style="font-weight: 500; font-size: 1.1rem;">Sair da Conta</span>
            </a>
            
            <a class="menu-item acao-deletar" href="{% url 'Echo_app:excluir_conta' %}" style="padding: 15px; text-decoration: none; color: #6c757d; font-size: 1rem; display: flex; align-items: center; border-radius: 10px; transition: background 0.2s;">
                <span style="margin-right: 15px; font-size: 1.4rem;"></span> 
                <span>Excluir Conta Permanentemente</span>
            </a>
        </nav>
    </div>
</div>

<style>
    .menu-item:hover {
        background-color: #f0f0f0 !important;
        transform: translateX(5px);
    }
</style>
{% endblock %}