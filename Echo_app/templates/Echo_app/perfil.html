{% extends "Echo_app/base.html" %}
{% load static %}

{% block title %}Meu perfil{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'Echo_app/css/perfil.css' %}?v={% now 'U' %}">
{% endblock %}

{% block content %}

<h1 class="main-title">Meu perfil</h1>

<div class="perfil-card">

    <!-- Cabe√ßalho do perfil -->
    <div class="perfil-header">
        
        <!-- Foto de perfil -->
        <div class="perfil-avatar-container">
            {% if perfil.foto_perfil %}
                <img id="perfil-avatar-img" src="{{ perfil.foto_perfil.url }}" alt="Foto de Perfil" class="perfil-avatar">
            {% else %}
                <img id="perfil-avatar-img" src="{% static 'Echo_app/images/default_avatar.png' %}" alt="Foto de Perfil" class="perfil-avatar">
            {% endif %}

            <a href="{% url 'Echo_app:perfil_editar' %}" class="edit-avatar-icon" title="Editar foto">
                <!-- √çcone SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M21.731 2.269a2.64 2.64 0 0 0-3.737 0l-12.72 12.72A1.97 1.97 0 0 0 5.25 15.75v3.626h3.626a1.97 1.97 0 0 0 1.404-.579l12.72-12.72a2.64 2.64 0 0 0 0-3.737ZM7.125 18v1.875H5.25a.375.375 0 0 1-.375-.375v-1.5h1.875ZM18.75 8.25l-7.5-7.5-1.5 1.5 7.5 7.5 1.5-1.5Z" />
                </svg>
            </a>
        </div>
        
        <!-- Informa√ß√µes do usu√°rio -->
        <div class="perfil-info">
            <h3 class="saudacao">
                Seja bem-vindo, {{ request.user.first_name|default:"Usu√°rio" }}!
            </h3>
            <p class="user-email">{{ request.user.email|default:"email@exemplo.com" }}</p>

            {% if perfil.biografia %}
                <p class="user-bio mt-2 text-muted" style="white-space: pre-line;">{{ perfil.biografia }}</p>
            {% endif %}

            <a href="{% url 'Echo_app:perfil_editar' %}" class="edit-profile-btn">Editar perfil</a>
        </div>
    </div>
    
    <hr class="perfil-divider">

    <!-- Categorias de interesse -->
    {% if perfil.categorias_de_interesse.all %}
    <div class="perfil-categorias mt-3">
        <h5 class="categorias-title">Minhas Categorias de Interesse</h5>
        <ul class="lista-categorias">
            {% for categoria in perfil.categorias_de_interesse.all %}
                <li class="categoria-item">{{ categoria.nome }}</li>
            {% endfor %}
        </ul>
    </div>
    <hr class="perfil-divider">
    {% endif %}

    <!-- Menu lateral / op√ß√µes -->
    <nav class="menu-opcoes">
        
        <a class="menu-item" href="#">
            <span class="menu-icon">‚ù§Ô∏è</span> Curtidas
        </a>

        <a class="menu-item" href="#">
            <span class="menu-icon">üîñ</span> Salvos
        </a>

        <hr class="menu-divider"> 

        <a class="menu-item" href="#">
            <span class="menu-icon">‚öôÔ∏è</span> Configura√ß√µes da conta
        </a>
        
        <a class="menu-item" href="#">
            <span class="menu-icon">üñ•Ô∏è</span> Dispositivos conectados
        </a>
        
        <a class="menu-item" href="#">
            <span class="menu-icon">üí¨</span> Inscri√ß√µes
        </a>

        <hr class="menu-divider">

        <!-- A√ß√µes -->
        <a class="menu-item acao-logout" href="{% url 'Echo_app:sair' %}">
            <span class="menu-icon">‚û°Ô∏è</span> Sair da conta
        </a>
        
        <a class="menu-item acao-deletar" href="{% url 'Echo_app:excluir_conta' %}">
            <span class="menu-icon">üóëÔ∏è</span> Excluir conta 
        </a>
        
    </nav>
    
</div>

{% endblock %}
