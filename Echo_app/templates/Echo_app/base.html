<!DOCTYPE html>
{% load static %} 
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Echo{% endblock %}</title>

    <link rel="stylesheet" type="text/css" href="{% static 'Echo_app/css/base.css' %}?v={% now 'U' %}">

    {% block extra_css %}{% endblock %}

    <style>
        /* Ajuste local para logos dos parceiros */
        .partner-circle img.partner-logo {
            object-fit: contain; /* Garante que a logo caiba no círculo */
            border-radius: 50%;  /* Mantém a forma circular */
        }
    </style>
</head>
<body>

    {% if user.is_authenticated %}
    
    <!-- ===================================== -->
    <!-- PARTE 1 - BLOCO PRETO COM LOGO UOL (DOS COLEGAS) -->
    <!-- ===================================== -->
    <header class="header-uol">
        <a href="https://www.uol.com.br" target="_blank" class="uol-logo-link">
             <img src="{% static 'Echo_app/images/uol_logo.png' %}" alt="Logo UOL" class="uol-logo-img" style="height:60px;">
        </a>
    </header>

    <!-- ===================================== -->
    <!-- PARTE 2 - BARRA DE NAVEGAÇÃO "ECHO" (NOSSA) -->
    <!-- ===================================== -->
    <!-- 
        Estrutura da barra de navegação principal do Echo:
        - Ícone para abrir o menu lateral (sidebar)
        - Campo de pesquisa no cabeçalho
        - Logo do Echo centralizada
        - Link para o perfil do usuário à direita
        Esta barra serve como navegação principal do aplicativo.
    -->
    <header class="top-nav">
        <div class="top-nav-left">
            <a href="#" class="nav-icon" id="sidebar-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </a>
            
            <div class="search-input-container">
                <input type="text" id="header-search-input" placeholder="Pesquisar..." class="search-input-header">
                <svg class="search-icon-header" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                </svg>
            </div>
            </div>
        </div>
        
    <a href="{% url 'Echo_app:dashboard' %}" class="logo-container top-nav-center">
            <img src="{% static 'Echo_app/images/logo_JC.png' %}" alt="Logo JC" class="logo-img">
            <span class="brand-name">Echo</span>
        </a>
        
        <div class="top-nav-right">
             <a href="{% url 'Echo_app:perfil' %}" class="nav-icon-profile-link">
                <img src="{% static 'Echo_app/images/perfil.png' %}" alt="Foto de Perfil" class="nav-icon-img">
            </a>
        </div>
    </header>

    <!-- ===================================== -->
    <!-- PARTE 3 - PRODUTOS JC PE (DOS COLEGAS) -->
    <!-- ===================================== -->
    <section class="partners-section">
        <div class="partners-grid">
            <a href="https://interior.ne10.uol.com.br/" target="_blank" class="partner-circle">
                <img src="{% static 'Echo_app/images/ne10.png' %}" alt="Interior NE10" class="partner-logo" 
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="partner-placeholder" style="display: none;">NE</div>
            </a>
            <a href="https://jc.uol.com.br/radio-jornal" target="_blank" class="partner-circle">
                <img src="{% static 'Echo_app/images/radio_jornal.png' %}" alt="Rádio Jornal" class="partner-logo"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="partner-placeholder" style="display: none;">RJ</div>
            </a>
            <a href="https://jc.uol.com.br/tv-jornal" target="_blank" class="partner-circle">
                <img src="{% static 'Echo_app/images/tv_jornal.png' %}" alt="TV Jornal" class="partner-logo"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="partner-placeholder" style="display: none;">TV</div>
            </a>
            <a href="https://jc.uol.com.br/blog-do-torcedor" target="_blank" class="partner-circle">
                <img src="{% static 'Echo_app/images/blog_torcedor.png' %}" alt="Blog do Torcedor" class="partner-logo"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="partner-placeholder" style="display: none;">BT</div>
            </a>
            <a href="https://jc.uol.com.br/social1" target="_blank" class="partner-circle">
                <img src="{% static 'Echo_app/images/social1.png' %}" alt="Social1" class="partner-logo"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="partner-placeholder" style="display: none;">S1</div>
            </a>
            <a href="https://receitadaboa.com.br/" target="_blank" class="partner-circle">
                <img src="{% static 'Echo_app/images/receita_boa.png' %}" alt="Receita da Boa" class="partner-logo"
                     onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                <div class="partner-placeholder" style="display: none;">RB</div>
            </a>
        </div>
    </section>
    {% endif %}


    <main class="app-content">
        {% block content %}{% endblock %}
    </main>
    
    <!-- ===================================== -->
    <!-- HTML DA BARRA LATERAL (NOSSO)         -->
    <!-- ===================================== -->
    <div id="sidebar-overlay"></div>
    
    <aside id="sidebar-menu">
        <div class="sidebar-header">
            <div class="sidebar-search-container">
                <div class="sidebar-search-wrapper">
                    <svg class="sidebar-search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                    </svg>
                    <input type="text" id="sidebar-search-input" placeholder="Pesquisar no menu...">
                </div>
            </div>
            
            <button id="sidebar-close" class="nav-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <hr>
            <div class="sidebar-dropdown">
                <button class="sidebar-dropdown-toggle" id="aovivo-toggle">
                    <img src="{% static 'Echo_app/images/circulo.png' %}" alt="Ao vivo" class="logo-img">
                    <span>Ao vivo</span>
                    <svg class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                    </svg>
                </button>
                <div class="sidebar-dropdown-content" id="aovivo-content">
                    <a href="https://jc.uol.com.br/radio-jornal/ao-vivo">Rádio Jornal (Recife)</a>
                    <a href="https://interior.ne10.uol.com.br/radio-jornal/caruaru?_gl=1*q9q8ax*_ga*NDA2MjAyMzAxLjE3NTQxNDc2Nzk.*_ga_S1QTC8L49Z*czE3NjE5NjE0NDIkbzI0JGcwJHQxNzYxOTYxNDQyJGo2MCRsMCRoMA..">Rádio Jornal (Interior)</a>
                    <a href="https://tvjornal.com.br/ao-vivo?_gl=1*q9q8ax*_ga*NDA2MjAyMzAxLjE3NTQxNDc2Nzk.*_ga_S1QTC8L49Z*czE3NjE5NjE0NDIkbzI0JGcwJHQxNzYxOTYxNDQyJGo2MCRsMCRoMA..">TV Jornal (Recife)</a>
                    <a href="https://interior.ne10.uol.com.br/tv-jornal/ao-vivo?_gl=1*cshhd2*_ga*NDA2MjAyMzAxLjE3NTQxNDc2Nzk.*_ga_S1QTC8L49Z*czE3NjE5NjE0NDIkbzI0JGcwJHQxNzYxOTYxNDQyJGo2MCRsMCRoMA..">TV Jornal (Interior)</a>
                </div>
            </div>
        <hr>

        <nav class="sidebar-nav">
            <a href="https://jc.uol.com.br/ultimas" class="sidebar-subheader">Últimas notícias</a>
            <a href="https://digital.jc.uol.com.br/?_gl=1*nn61da*_gcl_au*OTM4NDYxMTY2LjE3NTUyNjU3Njc.*_ga*NDA2MjAyMzAxLjE3NTQxNDc2Nzk.*_ga_B1QG8PGV8C*czE3NjE5NjE0NDIkbzIzJGcxJHQxNzYxOTYzMjA1JGo1OSRsMCRoMA..">Jornal digital</a>
            <a href="https://jc.uol.com.br/colunas">Colunistas</a>
            <a href="https://jc.uol.com.br/pernambuco">Pernambuco</a>
            <a href="https://jc.uol.com.br/colunas/seguranca">Segurança</a>
            <a href="https://jc.uol.com.br/colunas/saude-e-bem-estar">Saúde e bem-estar</a>
            <a href="https://jc.uol.com.br/colunas/enem-e-educacao">ENEM e educação</a>
            <a href="https://jc.uol.com.br/colunas/mobilidade">Mobilidade</a>
            <a href="https://jc.uol.com.br/politica">Política</a>
            <a href="https://jc.uol.com.br/economia">Economia</a>
            <a href="https://jc.uol.com.br/cultura">Cultura</a>
            <a href="https://jc.uol.com.br/mundo/">Mundo</a>
            <a href="https://jc.uol.com.br/opiniao">Artigo de Opinião</a>
            <a href="https://jc.uol.com.br/recall-de-marcas">Recall de Marcas</a>
            <hr>
            
            {% if user.is_authenticated %}
                <a href="{% url 'Echo_app:sair' %}">Sair (Logout)</a>
            {% endif %}
            
        </nav>
        
        <div class="sidebar-social">
            <h4 class="sidebar-social-title">Nossas redes</h4>
            <div class="sidebar-social-links">
                <!-- Facebook -->
                <a href="https://www.facebook.com/jornaldocommercioPE" target="_blank" class="social-icon" title="Facebook">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M14 13.5H16.5L17.5 9.5H14V7.5C14 6.47 14 5.5 16 5.5H17.5V2.14C17.174 2.097 15.943 2 14.643 2C11.928 2 10 3.657 10 6.7V9.5H7V13.5H10V22H14V13.5Z"/></svg>
                </a>
                <!-- Instagram -->
                <a href="https://www.instagram.com/jc_pe/" target="_blank" class="social-icon" title="Instagram">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.07 1.646.07 4.85s-.012 3.584-.07 4.85c-.148 3.227-1.669 4.771-4.919 4.919-1.266.058-1.646.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.07-1.646-.07-4.85s.012-3.584.07-4.85c.148-3.227 1.669-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163Zm0 1.626c-3.172 0-3.518.01-4.745.07-2.67.12-3.648.997-3.768 3.768-.06 1.226-.07 1.572-.07 4.745s.01 3.518.07 4.745c.12 2.67.997 3.648 3.768 3.768 1.226.06 1.572.07 4.745.07 3.172 0 3.518-.01 4.745-.07 2.67-.12 3.648-.997 3.768-3.768.06-1.226.07-1.572.07-4.745s-.01-3.518-.07-4.745c-.12-2.67-.997-3.648-3.768-3.768C15.518 3.799 15.172 3.789 12 3.789Zm0 3.169a5.042 5.042 0 1 0 0 10.084 5.042 5.042 0 0 0 0-10.084Zm0 1.626a3.416 3.416 0 1 1 0 6.832 3.416 3.416 0 0 1 0-6.832Zm4.965-2.227a1.196 1.196 0 1 0 0 2.392 1.196 1.196 0 0 0 0-2.392Z"/></svg>
                </a>
                <!-- X (Twitter) -->
                <a href="https://x.com/jc_pe" target="_blank" class="social-icon" title="X (Twitter)">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932L18.901 1.153ZM17.61 20.644h2.039L6.486 3.24H4.298l13.312 17.404Z"/></svg>
                </a>
                <!-- LinkedIn -->
                <a href="https://www.linkedin.com/company/jornal-do-commercio/" target="_blank" class="social-icon" title="LinkedIn">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.5 2h-17A1.5 1.5 0 0 0 2 3.5v17A1.5 1.5 0 0 0 3.5 22h17a1.5 1.5 0 0 0 1.5-1.5v-17A1.5 1.5 0 0 0 20.5 2ZM8 19H5V8h3v11ZM6.5 6.73c-.966 0-1.75-.79-1.75-1.76S5.534 3.21 6.5 3.21s1.75.79 1.75 1.76S7.466 6.73 6.5 6.73ZM19 19h-3v-5.6c0-1.34-.02-3.07-1.87-3.07-1.87 0-2.16.02-2.16 2.98V19h-3V8h2.88v1.34h.04c.42-.79 1.44-1.64 2.84-1.64 3.04 0 3.6 2 3.6 4.6V19Z"/></svg>
                </a>
                <!-- YouTube -->
                <a href="https://www.youtube.com/@JCPlayOficial" target="_blank" class="social-icon" title="YouTube">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M21.582 7.187C21.327 6.186 20.55 5.408 19.55 5.153C17.844 4.7 12 4.7 12 4.7s-5.844.0-7.55.453C3.449 5.408 2.673 6.186 2.418 7.187C2 8.893 2 12 2 12s.0 3.107.418 4.813c.255 1.001 1.031 1.779 2.031 2.034C6.156 19.3 12 19.3 12 19.3s5.844.0 7.55-.453c1.001-.255 1.777-1.033 2.032-2.034C22 15.107 22 12 22 12s.0-3.107-.418-4.813ZM9.75 14.85V9.15l4.333 2.85-4.333 2.85Z"/></svg>
                </a>
                <!-- TikTok -->
                <a href="https://www.tiktok.com/@jc_pe" target="_blank" class="social-icon" title="TikTok">
                    <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.525.02c1.31-.02 2.61-.01 3.91.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 2.17-5.65 1.16-1.24-.6-2.1-1.65-2.61-2.8-.3-.68-.46-1.4-.55-2.12-.02-2.86-.01-5.71-.01-8.57 0-2.55 1.73-4.92 4.22-5.77.59-.2 1.19-.3 1.79-.31.05-1.05.08-2.12.01-3.18-.01-.05-.01-.1-.01-.15Z"/></svg>
                </a>
            </div>
        </div>
    </aside>
    <!-- ===================================== -->
    <!-- FIM DO HTML DA BARRA LATERAL          -->
    <!-- ===================================== -->


    {% block extra_js %}
    {{ block.super }} 
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- CÓDIGO DO SIDEBAR ---
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebarClose = document.getElementById('sidebar-close');
        const sidebarMenu = document.getElementById('sidebar-menu');
        const sidebarOverlay = document.getElementById('sidebar-overlay');

        function openSidebar() {
            if (sidebarMenu) sidebarMenu.classList.add('active');
            if (sidebarOverlay) sidebarOverlay.classList.add('active');
        }
        function closeSidebar() {
            if (sidebarMenu) sidebarMenu.classList.remove('active');
            if (sidebarOverlay) sidebarOverlay.classList.remove('active');
        }
        if (sidebarToggle) {
            sidebarToggle.addEventListener('click', function(e) {
                e.preventDefault(); 
                openSidebar();
            });
        }
        if (sidebarClose) {
            sidebarClose.addEventListener('click', function(e) {
                e.preventDefault();
                closeSidebar();
            });
        }
        if (sidebarOverlay) {
            sidebarOverlay.addEventListener('click', function(e) {
                e.preventDefault();
                closeSidebar();
            });
        }

        // --- DROPDOWN "AO VIVO" ---
        const aovivoToggle = document.getElementById('aovivo-toggle');
        const aovivoContent = document.getElementById('aovivo-content');
        
        if (aovivoToggle && aovivoContent) {
            aovivoToggle.addEventListener('click', function(e) {
                e.preventDefault();
                this.classList.toggle('active');
                aovivoContent.classList.toggle('active');
            });
        }

        // --- PESQUISA NA SIDEBAR ---
        const searchInput = document.getElementById('sidebar-search-input');
        const allLinks = document.querySelectorAll('.sidebar-nav > a, .sidebar-dropdown-content > a');

        if (searchInput && allLinks.length > 0) {
            searchInput.addEventListener('input', function(e) {
                const filter = e.target.value.toLowerCase();
                
                allLinks.forEach(link => {
                    const text = link.textContent.toLowerCase();
                    if (text.includes(filter)) {
                        link.style.display = 'block';
                    } else {
                        link.style.display = 'none';
                    }
                });
            });
        }
        
        // --- CÓDIGO DOS PRODUTOS (DOS COLEGAS) ---
        const partnerLogos = document.querySelectorAll('.partner-logo');
        partnerLogos.forEach(logo => {
            logo.addEventListener('load', function() {
                this.nextElementSibling.style.display = 'none';
            });
            
            logo.addEventListener('error', function() {
                this.style.display='none';
                this.nextElementSibling.style.display='flex';
            });
            
            if (logo.complete && logo.naturalWidth === 0) {
                 logo.dispatchEvent(new Event('error'));
            }
        });
    });
    // --- NOVO CÓDIGO: FUNCIONALIDADE DA LUPA DE PESQUISA ---
        const searchToggleButton = document.getElementById('search-toggle-btn');
        const mainSearchInput = document.getElementById('main-search-input');
        const topNavRight = document.querySelector('.top-nav-right');

        if (searchToggleButton && mainSearchInput) {
            searchToggleButton.addEventListener('click', function(e) {
                e.preventDefault();
                // ... código para expandir/recolher ...
            });
            mainSearchInput.addEventListener('blur', function() {
                // ... código para recolher no blur ...
            });
        }

    </script>
    {% endblock %}

</body>
</html>

