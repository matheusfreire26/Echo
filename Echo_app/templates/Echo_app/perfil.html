{% extends "Echo_app/base.html" %}
{% load static %}

{% block title %}Meu Perfil{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'Echo_app/css/perfil.css' %}?v={% now 'U' %}">

<style>
    /* ----------------------------------------------------
     * ESTILOS DE √çCONES (Controle de Hover para Imagens e Tamanho Aumentado)
     * ---------------------------------------------------- */
    
    .menu-item {
        position: relative;
    }

    /* üö® TAMANHO AUMENTADO DO WRAPPER (70px) üö® */
    .icon-wrapper {
        width: 70px; 
        height: 70px;
        margin-right: 35px; /* Ajustando a margem para o novo tamanho */
        position: relative;
        min-width: 70px; 
    }

    /* Estilo base para todas as imagens de √≠cones */
    .icon-wrapper img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: contain;
        transition: opacity 0.2s, transform 0.2s ease; /* Adiciona transform para a transi√ß√£o */
        
        /* üö® APLICA√á√ÉO DO ZOOM/ESCALA NOS √çCONES üö® */
        transform: scale(2.5); /* Exemplo: Aumenta a imagem para 160% do tamanho do wrapper (70px) */
    }

    /* 1. √çcones Curtidas */
    .curtidas .icon-filled,
    .curtidas:hover .icon-empty {
        display: none; 
        opacity: 0;
    }
    .curtidas .icon-empty {
        display: block; 
        opacity: 1;
    }
    .curtidas:hover .icon-filled {
        display: block;
        opacity: 1;
    }

    /* 2. √çcones Salvas */
    .salvas .icon-filled,
    .salvas:hover .icon-empty {
        display: none;
        opacity: 0;
    }
    .salvas .icon-empty {
        display: block;
        opacity: 1;
    }
    .salvas:hover .icon-filled {
        display: block;
        opacity: 1;
    }
    
    /* 3. √çcone Sair */
    .acao-logout .icon-filled,
    .acao-logout:hover .icon-empty {
        display: none;
        opacity: 0;
    }
    .acao-logout .icon-empty {
        display: block; 
        opacity: 1;
        /* Se o √≠cone vazio for colorido, voc√™ pode ajust√°-lo aqui.
           Caso contr√°rio, ele herda a escala de .icon-wrapper img */
    }
    .acao-logout:hover .icon-filled {
        display: block;
        opacity: 1;
    }
    
    /* 4. √çcone Excluir */
    .acao-deletar .icon-filled,
    .acao-deletar:hover .icon-empty {
        display: none;
        opacity: 0;
    }
    .acao-deletar .icon-empty {
        display: block;
        opacity: 1;
         /* Se o √≠cone vazio for colorido, voc√™ pode ajust√°-lo aqui.
           Caso contr√°rio, ele herda a escala de .icon-wrapper img */
    }
    .acao-deletar:hover .icon-filled {
        display: block;
        opacity: 1;
    }
    
    /* üö® NOVO: Garante que o texto do menu mantenha o tamanho üö® */
    .menu-item > span:not(.icon-wrapper) {
        font-size: 1.2rem !important;
        font-weight: 600 !important;
    }
    
    /* * CORRE√á√ïES DE ESTILO TEMPOR√ÅRIAS (Mantidas) */
    .perfil-avatar-container {
        border-radius: 50% !important; 
        overflow: hidden !important;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2) !important;
    }
    
    /* Adaptando o Bot√£o Editar do HTML antigo ao novo CSS de avatar */
    .edit-avatar-icon {
        position: absolute;
        bottom: 20px; 
        right: 40px; 
        background: #fff; 
        border-radius: 50%; 
        width: 60px; 
        height: 60px; 
        box-shadow: 0 4px 10px rgba(0,0,0,0.3); 
        display: flex; 
        align-items: center; 
        justify-content: center; 
        color: #333; 
        text-decoration: none; 
        font-size: 28px; 
        z-index: 10;
        transition: transform 0.2s ease;
    }
    .edit-avatar-icon:hover {
        transform: scale(1.1);
        background-color: #f9f9f9;
    }
    
</style>
{% endblock %}

{% block content %}

<div class="container"> 
    <h1 class="main-title">Meu Perfil</h1>

    <div class="perfil-card"> 
        <div class="perfil-header">
            
            <div class="perfil-avatar-container">
                
                {% if perfil.foto_perfil %}
                    <img id="perfil-avatar-img" 
                         src="{{ perfil.foto_perfil.url }}?v={% now 'U' %}" 
                         alt="Foto de Perfil"
                         class="perfil-avatar"> 
                {% else %}
                    <img id="perfil-avatar-img" 
                         src="https://ui-avatars.com/api/?name={{ request.user.first_name|default:request.user.username }}&background=0D8ABC&color=fff&size=512&font-size=0.5&bold=true" 
                         alt="Avatar Padr√£o" 
                         class="perfil-avatar"> 
                {% endif %}

                <a href="{% url 'Echo_app:perfil_editar' %}" title="Editar foto" 
                   class="edit-avatar-icon">
                    ‚úé
                </a>
            </div>
            
            <div class="perfil-info">
                <h3 class="saudacao">
                    {{ request.user.first_name }} {{ request.user.last_name }}
                </h3>
                <p class="user-email">{{ request.user.email }}</p>

                {% if perfil.biografia %}
                    <div class="user-bio">
                        <p style="white-space: pre-line; margin: 0;">{{ perfil.biografia }}</p>
                    </div>
                {% endif %}

                <div style="margin-top: 20px;">
                    <a href="{% url 'Echo_app:perfil_editar' %}" class="edit-profile-btn">
                        Editar Perfil
                    </a>
                </div>
            </div>
        </div>
        
        <hr class="perfil-divider">

        <nav class="menu-opcoes">
            <a class="menu-item curtidas" href="{% url 'Echo_app:noticias_curtidas' %}">
                <span class="icon-wrapper">
                    <img src="{% static 'Echo_app/images/curtida.png' %}" alt="Curtidas Vazio" class="icon-empty">
                    <img src="{% static 'Echo_app/images/curtida_cheia.png' %}" alt="Curtidas Cheio" class="icon-filled">
                </span>
                <span>Not√≠cias Curtidas</span>
            </a>

            <a class="menu-item salvas" href="{% url 'Echo_app:noticias_salvas' %}">
                <span class="icon-wrapper">
                    <img src="{% static 'Echo_app/images/salvar.png' %}" alt="Salvas Vazio" class="icon-empty">
                    <img src="{% static 'Echo_app/images/salvar_cheia.png' %}" alt="Salvas Cheio" class="icon-filled">
                </span>
                <span>Not√≠cias Salvas</span>
            </a>

            <a class="menu-item configuracoes" href="{% url 'Echo_app:configuracoes_conta' %}">
                <span class="icon-wrapper">
                    <img src="{% static 'Echo_app/images/configuracao.png' %}" alt="Configura√ß√µes">
                </span>
                <span>Configura√ß√µes da Conta</span>
            </a>

            <hr class="menu-divider">

            <a class="menu-item acao-logout" href="{% url 'Echo_app:sair' %}">
                <span class="icon-wrapper">
                    <img src="{% static 'Echo_app/images/sair.png' %}" alt="Sair Vazio" class="icon-empty">
                    <img src="{% static 'Echo_app/images/sair_cheio.png' %}" alt="Sair Cheio" class="icon-filled">
                </span> 
                <span>Sair da Conta</span>
            </a>
            
            <a class="menu-item acao-deletar" href="{% url 'Echo_app:excluir_conta' %}">
                <span class="icon-wrapper">
                    <img src="{% static 'Echo_app/images/excluir.png' %}" alt="Excluir Vazio" class="icon-empty">
                    <img src="{% static 'Echo_app/images/excluir_cheio.png' %}" alt="Excluir Cheio" class="icon-filled">
                </span> 
                <span>Excluir Conta Permanentemente</span>
            </a>
        </nav>
    </div>
</div>
{% endblock %}